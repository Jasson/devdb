1. 如何安装在Ubuntu 9.10上安装ejabberd-2.1.3
<1> 要求:
    已经根据文档$doc/public/erlang/erlang_R13B01_install.txt的步骤1.<1>, 安装Erlang依赖的包

<2> 安装ejabberd依赖的包
    sudo apt-get install erlang (更新erlang的lib库，默认安装的缺少很多lib模块)
    sudo apt-get install libssl-dev
    sudo apt-get install libexpat1-dev
    sudo apt-get install zlib1g-dev

<3> 编译 & 安装
    tar -xzvf 
    cd ejabberd-2.1.3/src
    ./configure --prefix=/usr/local/imserver --enable-odbc
    make
    sudo make install

    ejabberd会安装在/usr/local/imserver/目录下

<4> 编译 & 安装MySQL Driver
    svn co https://svn.process-one.net/ejabberd-modules/mysql/trunk mysql
    cd mysql
    ./build.sh

    手动拷贝ebin下面的四个*.beam文件到ejabberd的ebin目录下. 
    * mysql.beam
    * mysql_auth.beam
    * mysql_conn.beam
    * mysql_recv.beam

    cp mysql/ebin/* /usr/local/imserver/lib/ejabberd/ebin

<5> 生成Ejabberd mysql 数据库
    wget https://git.process-one.net/ejabberd/mainline/blobs/raw/2.1.x/src/odbc/mysql.sql
    mysql -u root -p imdb < mysql.sql

<6> 修改配置文件:
    ejabberd.cfg - v0.1
    a. 配置使用MySQL
    {auth_method, odbc}.
    {odbc_server, {mysql, "localhost", "imdb", "root", "password"}}.
    b. 修改7个Modules的配置, 使用_odbc后缀
    mod_last_odbc
    mod_offline_odbc
    mod_privacy_odbc
    mod_private_odbc
    mod_pubsub_odbc
    mod_roster_odbc
    mod_vcard_odbc

<7> 服务相关:
    ejabberdctl start
    ejabberdctl stop
    ejabberdctl status

<8> 使用ejabberdctl注册一个用户, 并查看一个服务器上的注册用户数
    ejabberdctl register username domain.com password
    ejabberdctl registered_users domain.com


